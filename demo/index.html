<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Progressive Webapp Plugin</title>
  <link rel="stylesheet" text="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css" />
  <style>html { background: #23241f }</style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
  <pre><code id="sw" class="js"></code></pre>
  <script>
    (function() {
      const node = document.getElementById('sw');
      const queryParams = location.search.substr(1).split('&').reduce((q, query) => {
        const [key, value] = query.split('=');
        return (q[key] = value, q);
      }, {});
      console.log(queryParams);
      const key = queryParams.key || 'main';
      fetch(`sw-${key}.js`)
        .then(res => res.text())
        .then(text => {
          node.innerHTML = text;
          hljs.highlightBlock(node);
        });
    }());
  </script>
</body>
</html>
